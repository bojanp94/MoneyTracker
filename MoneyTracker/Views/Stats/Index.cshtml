@using MoneyTracker.Models
@model StatsViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!DOCTYPE html>
<html>
<head>
    <style>
        .month-val, .category, .category-val, .day-of-week-val, .day-of-year-val {
            display: none;
        }

        .header-data {
            margin-top: 30px;
        }

        .top-purchases {
            margin-top: 30px;
        }

        .left-col {
            float: left;
            width: 50%;
        }

        .right-col {
            float: left;
            width: 50%;
        }

        .row {
            width: 500px;
        }

    </style>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="~/Scripts/stats.js"></script>
</head>

<body>
    <div class="header-data">
        <div class="row">
            <div class="left-col">Daily Average Spending</div>
            <div class="right-col">@string.Format("{0:0.00}", Model.DailyAverageSpending)</div>
        </div>

        <div class="row">
            <div class="left-col">Weekly Average Spending</div>
            <div class="right-col">@string.Format("{0:0.00}", Model.WeeklyAverageSpending)</div>
        </div>

        <div class="row">
            <div class="left-col">Monthly Average Spending</div>
            <div class="right-col">@string.Format("{0:0.00}", Model.MonthlyAverageSpending)</div>
        </div>

        <div class="row">
            <div class="left-col">Total Spending</div>
            <div class="right-col">@string.Format("{0:0.00}", Model.TotalSpending)</div>
        </div>
    </div>

    <div class="top-purchases">
        <div>Most Expensive Purchases</div>
        @foreach (var item in Model.MostExpensivePurchases)
        {
            <div class="row">
                <div class="left-col">@item.EntryName</div>
                <div class="right-col">@item.EntrySum</div>
            </div>
        }
    </div>

    @foreach (var item in Model.SpendingsByMonth)
    {
        <div class="month-val">@item</div>
    }

    @foreach (var item in Model.SpendingsByCategory)
    {
        <div class="category">@item.Value.CategoryName</div>
        <div class="category-val">@item.Value.Sum</div>
    }

    @foreach (var item in Model.SpendingsByDayOfWeek)
    {
        <div class="day-of-week-val">@item</div>
    }

    @foreach (var item in Model.SpendingsByDayOfYear)
    {
        <div class="day-of-year-val">@item</div>
    }

    <canvas id="spendingsByMonthChart" width="1200" height="400"></canvas>
    <canvas id="spendingsByCategoryChart" width="1200" height="400"></canvas>
    <canvas id="spendingsByDayOfWeekChart" width="1200" height="400"></canvas>
    <canvas id="spendingsByDayOfYearChart" width="1200" height="400"></canvas>

    <script src="~/Scripts/Chart.js"></script>
</body>

</html>